#$$LIC$$
#
# $Id: Makefile.in,v 1.2 2005/01/04 09:25:12 luz Exp $
# 
# Makefile
SHELL = @SHELL@
top_srcdir = @top_srcdir@
prefix = @prefix@

SUBDIRS = lib libmisc examples collector probe

.PHONY: subdirs $(SUBDIRS)

all: subdirs

# build all subdirectories
subdirs: $(SUBDIRS)

# ensure libmisc compiled before lib
lib: libmisc
# ensure lib, libmisc compiled before
examples collector probe: lib libmisc 

# rule how to build each subdirectory
$(SUBDIRS):
	@if [ -n "$(filter $(MAKECMDGOALS),$(SUBDIRS))" ]; then \
		echo $(MAKE) -C $@; \
		$(MAKE) -C $@; \
	else \
		echo $(MAKE) -C $@ $(MAKECMDGOALS); \
		$(MAKE) -C $@ $(MAKECMDGOALS); \
	fi

clean install: subdirs

distclean: subdirs
	rm -rf config.status config.log Makefile

